<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Apache Kafka&#174; Technical Fundamentals</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Apache Kafka&#174; Technical Fundamentals</h1>
<div class="details">
<span id="revnumber">version 7.0.0-v1.0.2</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_0_outline_objectives">0: Outline &amp; Objectives</a></li>
<li><a href="#_1_getting_started">1: Getting Started</a></li>
<li><a href="#_2_how_are_messages_organized">2: How are Messages Organized?</a></li>
<li><a href="#_3_how_do_i_scale_and_do_more_things_with_my_data">3: How Do I Scale and Do More Things With My Data?</a></li>
<li><a href="#_4_whats_going_on_inside_kafka">4: What&#8217;s Going On Inside Kafka?</a></li>
<li><a href="#_5_recapping">5: Recapping</a></li>
<li><a href="#_6_going_further_optional">6: Going Further (Optional)</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_0_outline_objectives">0: Outline &amp; Objectives</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_welcome">Welcome!</h3>
<div class="paragraph">
<p>Welcome to our Technical Fundamentals of Apache Kafka&#174; Training!</p>
</div>
<div class="paragraph">
<p>This course is explicitly designed to prepare you to take either of these courses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Confluent Developer Skills for Building Apache Kafka&#174;</p>
</li>
<li>
<p>Apache Kafka&#174; Administration by Confluent</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We start very simple and build up some logical concepts about the fundamentals of Kafka, before getting into some of how it works physically.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_agenda">Agenda</h3>
<div class="paragraph">
<p>Lessons of Presentation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Getting Started</p>
</li>
<li>
<p>How are Messages Organized?</p>
</li>
<li>
<p>How Do I Scale and Do More Things With My Data?</p>
</li>
<li>
<p>What&#8217;s Going On Inside Kafka?</p>
</li>
<li>
<p>Recapping and Going Further</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Exercises:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Two built-in interactive quizzes</p>
</li>
<li>
<p>Critical Thinking Challenge Exercises</p>
</li>
<li>
<p>Interactive Lab - Console Producing and Consuming</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_course_objectives">Course Objectives</h3>
<div class="paragraph">
<p>After participating the lessons and activities in this course, you will be able to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Describe the life cycle of a <strong>message</strong></p>
</li>
<li>
<p>Explain the concepts of <strong>topics</strong> and <strong>partitions</strong></p>
</li>
<li>
<p>Describe some properties of <strong>producers</strong> and <strong>consumers</strong></p>
</li>
<li>
<p>Explain two types of <strong>offsets</strong></p>
</li>
<li>
<p>Explain <strong>groups</strong> and their benefits</p>
</li>
<li>
<p>List some responsibilities of <strong>brokers</strong></p>
</li>
<li>
<p>Be prepared to take either of these courses:</p>
<div class="ulist">
<ul>
<li>
<p>Confluent Developer Skills for Building Apache Kafka&#174;</p>
</li>
<li>
<p>Apache Kafka&#174; Administration by Confluent</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_1_getting_started">1: Getting Started</h2>
<div class="sectionbody">
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Let&#8217;s get started with our first lesson of the Technical Fundamentals of Apache Kafka course.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_why_kafka">Why Kafka?</h3>
<div class="paragraph">
<p>In a nutshell&#8230;&#8203;</p>
</div>
<table class="tableblock frame-none grid-none stripes-even stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Kafka is good for</th>
<th class="tableblock halign-left valign-top">Kafka is not meant for</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>data in motion</p>
</li>
<li>
<p>real-time processing</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>batch processing</p>
</li>
<li>
<p>archiving data</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, why would you want to use Kafka? This course is really about the technical details, but it&#8217;s important to take a minute and talk about this.</p>
</div>
<div class="paragraph">
<p>We live in a world now where most of us want things instantly. Your customers probably demand resuls now, not later. So reacting to data in real-time is really what Kafka is meant for.</p>
</div>
<div class="paragraph">
<p>We like to say we enable you to work with data in motion. That is, when an event happens in the real-world, it gets recorded in Kafka. You can then do something with that more or less right away - like when ride-share apps match up drivers with riders who request rides. But the data is still current even after that, so you might do other things with it&#8201;&#8212;&#8201;analysis, offering promotions, etc.&#8201;&#8212;&#8201;and Kafka lets you do that too.</p>
</div>
<div class="paragraph">
<p>What Kafka is not meant for is the idea of that old process that runs at 11:00 every night, or once a month. There are plenty of legacy systems out there for that. Kafka is also not meant to be a place for storing data long term either. There are plenty of systems for that too. Kafka really is there to help you work with your data while it is moving.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_one_example_use_case_ordering_food">One Example Use Case: Ordering Food</h3>
<div class="paragraph">
<p>Suppose we are building a system for a restaurant chain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>customers order food via an app - mobile or kiosk</p>
</li>
<li>
<p>staff receive orders to fulfill in real-time</p>
</li>
<li>
<p>management tracks inventory based on orders</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will build up some of the fundamental details of Kafka and use this example.</p>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, I am going to talk about one particular use case and use this one to frame a lot of the ideas as we go.</p>
</div>
<div class="paragraph">
<p>It used to be that when it was time to order your lunch at a restaurant, that was all a manual process: you told someone what you wanted, they told the kitchen, someone made it, etc. More and more, computers are getting involved, and, especially these days, we&#8217;re doing a lot of ordering via apps.</p>
</div>
<div class="paragraph">
<p>So, imagine you&#8217;re building a system to support ordering food via an app&#8201;&#8212;&#8201;or maybe a kiosk at the front of the restaurant you see when you walk in. You place an order there. It enters the system. Something happens and an order slip is printed out for the folks in the back to make your food or put your order together. Not long after that, your order is ready to go!</p>
</div>
<div class="paragraph">
<p>Beyond you getting your order promptly, there might be other interest in the data. The manager of the restaurant probably wants to know what is being used up and needs to be reordered later. Some other process can be looking at the orders, for example, mid-afternoon, and saying that during the lunch rush, we used up a lot of fries and probably need more before dinner time. Another process can be looking for things like this and automate having another shipment of fries arrive to location 372 before dinner so that you&#8217;re never "out" of anything. All of this can be happening automatically with your data once it&#8217;s in Kafka and you&#8217;ve programmed the correct processes.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_messages">Messages</h3>
<div class="paragraph">
<p>The atomic unit of Kafka is a <strong>message</strong> or <strong>record</strong> or <strong>event</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig1-1.svg" alt="Box with two boxes inside, one labeled as key and one labeled as value." width="35%">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, let&#8217;s learn some of the language you need to know.</p>
</div>
<div class="paragraph">
<p>The most basic thing to know about is a <strong>message</strong>. This is the smallest "chunk" of data you have have in Kafka. It might be a single person&#8217;s order&#8201;&#8212;&#8201;or a single customer or menu item. You&#8217;ll hear messages also called <strong>records</strong> or <strong>events</strong>. Whichever of these terms you hear or use, they&#8217;re really all the same thing.</p>
</div>
<div class="paragraph">
<p>For the idea of real-time processing, the idea of an event really makes sense. Focusing on one of those examples, my lunch order is really an event. And, as we really want to push the idea of data in motion, we&#8217;re most often using the term "event" these days.</p>
</div>
<div class="paragraph">
<p>And, simply put, an event contains two things: a <strong>key</strong> and a <strong>value</strong>. The value is the data of the event. The key is technically not needed, but it is really important for a lot of things with how messages get stored, so we&#8217;re going to work from the start with the good practice of always associating keys with every message.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_topics">Topics</h3>
<div class="paragraph">
<p>Messages are organized in logical groups called <strong>topics</strong>.</p>
</div>
<div class="paragraph">
<p>Example topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>orders</strong></p>
</li>
<li>
<p>menu items</p>
</li>
<li>
<p>customers</p>
</li>
<li>
<p>restaurants</p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Okay, so the next thing is how we group our messages. Every message is part of a logical group called a <strong>topic</strong>.</p>
</div>
<div class="paragraph">
<p>In our example, all of the messages that are people&#8217;s orders live in one topic&#8201;&#8212;&#8201;we&#8217;ll call it <code>orders</code>. They all represent the same kind of information.</p>
</div>
<div class="paragraph">
<p>We could have topics for other things we know about - such as individual menu items, customers, or restaurants.</p>
</div>
<div class="paragraph">
<p>We&#8217;re going to focus on that <code>orders</code> topic and how a message gets associated with it, as well as how it gets used&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_three_basic_components">Three Basic Components</h3>
<div class="paragraph">
<p>Let&#8217;s start simple - with an <strong>orders</strong> topic in place in Kafka, a producer, and a consumer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig1-2.svg" alt="Kafka cluster in the center as a box containing another box labeled orders topic. Box for producer to the left and box for consumer to the right.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, here we see a picture with a Kafka cluster where our data will live. In it, that green box represents the <code>orders</code> topic we just talked about. All of our orders will live there, or, more accurately, move through there.</p>
</div>
<div class="paragraph">
<p>There are two other important components to start with - a producer and a consumer&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_producing">Life Cycle of a Message: Producing</h3>
<div class="paragraph">
<p>A <strong>producer</strong> prepares messages and publishes them to Kafka.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig1-3.svg" alt="Previous graphic with a box representing a message added inside the producer. There is also now a dotted arrow from the message pointing to the orders topic in Kafka.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So let&#8217;s see how a message travels though all of these components. We&#8217;re going to start here with a series of simple illustrations we&#8217;ll refine as we go.</p>
</div>
<div class="paragraph">
<p>Here on the left, the purple box represents a <strong>producer</strong>. A producer is an application that will prepare our messages, so that little orange box will represent a message our producer is getting ready. Let&#8217;s say it contains your lunch order.</p>
</div>
<div class="paragraph">
<p>The producer will say that the message is going to <code>orders</code> topic, and then send it off to Kafka. Or, to use different words, we might say the producer will publish the message with your lunch order to the <code>orders</code> topic.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_kafka">Life Cycle of a Message: Kafka</h3>
<div class="paragraph">
<p>Produced messages live in Kafka, organized by topic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig1-4.svg" alt="Previous graphic, but now the message is in the orders topic in Kafka and no longer showing in the producer.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Here we switch over to Kafka. Our producer said our message was to go to the <code>orders</code> topic, and indeed, here you see that message living within the <code>orders</code> topic in Kafka. It&#8217;s there, waiting for someone to do something with it&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_consumption">Life Cycle of a Message: Consumption</h3>
<div class="paragraph">
<p>Consumers subscribe to topics in Kafka and poll for new messages.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig1-5.svg" alt="Previous graphic with the message now shown inside the consumer as well, with a dotted arrow between the message in the orders topic in Kafka pointing to the message in the consumer.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>&#8230;&#8203;and that "someone" will be a <strong>consumer</strong>. The blue box on the right represents a consumer. It will get the message with your lunch order and decide what to do with it. (Hopefully, it&#8217;ll do something like print out your order for the kitchen so that you can get your food soon.)</p>
</div>
<div class="paragraph">
<p>To be a little more specific, not every consumer gets every message. Consumers must say what topics they&#8217;re interested in. We call this <strong>subscribing</strong> to topics, so this blue consumer has to be subscribed to the orders topic for this to happen.</p>
</div>
<div class="paragraph">
<p>You might have heard of the idea of a "pub-sub architecture" - or "publish/subscribe." Now that you&#8217;ve seen that producers publish messages and consumers subscribe to topics to get messages, hopefully you can see that Kafka fits this.</p>
</div>
<div class="paragraph">
<p>So&#8230;&#8203; that&#8217;s the basic story of messages, topics, producers, and consumers&#8201;&#8212;&#8201;and that&#8217;s this first lesson! Check out the next lesson to find out some more important details about how messages are organized in Kafka.</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_2_how_are_messages_organized">2: How are Messages Organized?</h2>
<div class="sectionbody">
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>From the first lesson of our Technical Fundamentals of Apache Kafka course, you know the basics of messages, topics, producers, and consumers.</p>
</div>
<div class="paragraph">
<p>Specifically, you know we have topics, but it&#8217;s important for you to learn a bit more about how messages are organized within topics. So let&#8217;s get into that&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_topics_and_partitions">Topics and Partitions</h3>
<div class="paragraph">
<p>Topics are broken down into <strong>partitions</strong></p>
</div>
<div class="paragraph">
<p>Simplest case: Topic with one partition</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig2-1.svg" alt="Kafka cluster shown with a box in it labeled 'orders: partition 0.' There is a box representing a message inside this partition box." width="60%">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>We know topics are groups of messages, but we have the ability to break down topics into <strong>partitions</strong>.</p>
</div>
<div class="paragraph">
<p>In fact, every topic must have one partition, so let&#8217;s refine our earlier picture to show our orders topic to have one partition, the simplest situation that is possible.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that this partition is labeled partition <code>0</code> - as we computer-science-minded folks like to do; indeed, we&#8217;ll always start counting from 0. And, you&#8217;ll notice that our orange message lives within this partition.</p>
</div>
<div class="paragraph">
<p>So then, we could more accurately say that every message lives not only within a topic, but within a partition of a topic. And while we can say that partitions form logical subsets of topics, we can say they are physical groupings as well. (We&#8217;ll get into that physical aspect later, in Lesson 4.)</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_offsetsin_kafka">Offsets&#8201;&#8212;&#8201;in Kafka</h3>
<div class="ulist">
<ul>
<li>
<p>Each message in a partition has an <strong>offset</strong></p>
</li>
<li>
<p>Starting from 0</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig2-2.svg" alt="Orders topic partition 0 is illustrated as broken down into 6 square box with solid borders and a last square box with dotted borders. In the solid border boxes are offsets 0 through 5, and the dotted border box has offset 6. Offset 0 is labeled as 'first message' and offset 5 is labeled as 'last message.'" width="65%">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>We also need to know where each message is within a partition, so we have these things called offsets to keep track of that.</p>
</div>
<div class="paragraph">
<p>We put the first message at offset <code>0</code> in a partition. We put the second message at offset <code>1</code>. And so forth.</p>
</div>
<div class="paragraph">
<p>In this picture, you see that we have a total of 6 messages stored, at offsets <code>0</code> through <code>5</code>. The partition&#8217;s machinery knows that the next message will go to offset <code>6</code>. And, in general, when a new message arrives to a given partition, it will be automatically written at that next offset.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_offsetsconsumer_offsets">Offsets&#8201;&#8212;&#8201;Consumer Offsets</h3>
<div class="ulist">
<ul>
<li>
<p>Consumers track where they will read next via a <strong>consumer offset</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig2-3.svg" alt="Kafka cluster with orders topic partition 0 with offsets as in last image. Consumer is added with an arrow pointing from the consumer to offset 0 in the orders topic partition 0." width="75%">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this picture, the consumer has last read the message at offset 3.
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, every message has an offset within a partition and this helps organize how the messages are stored. But how do the consumers know where they are reading? They have to keep track of their positions too.</p>
</div>
<div class="paragraph">
<p>So they do - via something called <strong>consumer offsets</strong>. Say our consumer knows to read the message at offset <code>3</code> in partition <code>0</code> of <code>orders</code>. It will do exactly that, and when it&#8217;s done, it will advance its consumer offset to <code>4</code>. Next time our consumer goes to read, it will read the message at offset <code>4</code>. In the picture, you see the consumer offset at this point, after the consumer has read the message at offset <code>3</code> and is ready to read the message at offset <code>4</code>.</p>
</div>
<div class="paragraph">
<p>We could say that consumer offsets are like bookmarks. Say you&#8217;re reading a book, have finished page 15, and it&#8217;s time to take a break. You&#8217;ll probably want to know where you left off next time you pick up the book, so you might grab a bookmark, flip the page, and put your bookmark at page 16. The consumer offset is simply a consumer putting a bookmark in the partition it is reading.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_check_your_knowledge">Check Your Knowledge!</h3>
<div class="paragraph">
<p>Try a <a href="https://forms.gle/Zmu2doLu8knXtCmy6" target="_blank" rel="noopener">quick quiz on Lessons 1 and 2</a>.</p>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>This concludes the content on message organization. Before going on, you are encouraged to take a break and take a quick quiz to check what you&#8217;ve learned so far&#8201;&#8212;&#8201;via the link above.</p>
</div>
<div class="paragraph">
<p>The quiz is powered by Google Forms, it&#8217;s quick, and it&#8217;s anonymous. You&#8217;ll instantly get feedback when you click the submit button.</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_3_how_do_i_scale_and_do_more_things_with_my_data">3: How Do I Scale and Do More Things With My Data?</h2>
<div class="sectionbody">
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Welcome to the third lesson of our Technical Fundamentals of Apache Kafka course. From the first two lessons, you should know what producers and consumers do, as well as the ideas of topics, partitions, offsets, and consumer offsets. Let&#8217;s take it further&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_scaling_up">Scaling Up&#8230;&#8203;</h3>
<div class="paragraph">
<p>So far, we have seen&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>one partition</p>
</li>
<li>
<p>one consumer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In practice&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multiple consumers in a consumer group</p>
</li>
<li>
<p>multiple consumer groups</p>
</li>
<li>
<p>multiple partitions in a topic</p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So far, in what we&#8217;ve seen, we&#8217;ve had one consumer and one partition. But in practice, you&#8217;ll want more. We&#8217;re going to learn about how and why here.</p>
</div>
<div class="paragraph">
<p>We can have multiple consumers in what we call consumer groups, and we&#8217;ll generally have multiple of those. As for the partitions themselves, we&#8217;ll almost always have multiple of them for a topic. Let&#8217;s get into it!</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_consumer_groups">Consumer Groups</h3>
<div class="paragraph">
<p>Consumers exist in <strong>consumer groups</strong></p>
</div>
<div class="paragraph">
<p>Consumers in a group:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>same</strong> application</p>
</li>
<li>
<p><strong>different</strong> data</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig3-1.svg" alt="Cluster shown with orders topic. Order processing consumer group shown with 3 consumers: consumer 0, consumer 1, and consumer 2. All three consumers have arrows originating at them and pointing to the orders topic in Kafka.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, we generally will put our consumers into what we call <strong>consumer groups</strong>. This allows us to deploy more consumers to get more power than just with a single consumer.</p>
</div>
<div class="paragraph">
<p>The first thing to know is that all the consumers in a consumer group are doing the same thing. That is, they are the same application. So, let&#8217;s change our earlier picture, and instead of having just one consumer processing orders, let&#8217;s have 3, and let&#8217;s put them in a group. You can see this above now.</p>
</div>
<div class="paragraph">
<p>What distinguishes the consumers in a group is that they are using different data. Put differently, they&#8217;re working as a team to process data. How is this possible? We&#8217;ll get into exactly how, but first&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_multiple_consumption">Multiple Consumption</h3>
<div class="paragraph">
<p>Could have multiple groups using the same data&#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig3-2.svg" alt="Same graphic as before, but now there is also an inventory consumer group with consumer 3 and consumer 4. Both consumer 3 and consumer 4 now also have arrows pointing to the orders topic in Kafka.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>&#8230;&#8203;we need to talk about having multiple consumer groups and why you&#8217;d want that.</p>
</div>
<div class="paragraph">
<p>You might recall in our earlier picture with a consumer reading a message, that message was still showing in the orders topic when the consumer read it. Indeed, this is true; when a consumer reads a message, it just advances its offset and leaves the message there. This allows things like having another consumer consume that message&#8201;&#8212;&#8201;to do something different with it.</p>
</div>
<div class="paragraph">
<p>If all the consumers in a group are doing the same thing, to do something different with a message that&#8217;s practical, we&#8217;d need a different consumer group. In our last picture, we had 3 consumers in a group processing orders.</p>
</div>
<div class="paragraph">
<p>Now, we&#8217;ll add on a second group&#8201;&#8212;&#8201;the two orange consumers are tracking inventory. They need to see the same orders that the other group did, but for a different reason&#8201;&#8212;&#8201;perhaps some ingredients got used a lot at lunch time and these consumers can trigger a process that ships more before dinner time. I like this idea! No one likes it when you get told, "sorry, we&#8217;re out of this, this, and this on the menu"!</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_multiple_partitions">Multiple Partitions</h3>
<div class="paragraph">
<p>In practice, we want topics to have multiple partitions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig3-3.svg" alt="Cluster showing 3 partitions of topic orders: partition 0, partition 1, and partition 2" width="472" height="299">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Now, let&#8217;s bring the idea of multiple partitions into play. Instead of having just one partition for our orders topic, let&#8217;s change the picture to have 3.</p>
</div>
<div class="paragraph">
<p>They&#8217;re numbered <code>0</code> to <code>2</code>, consistent with our earlier idea of counting from <code>0</code>.</p>
</div>
<div class="paragraph">
<p>So what does this enable? Well&#8230;&#8203;</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_consuming_from_multiple_partitions">Consuming from Multiple Partitions</h3>
<div class="paragraph">
<p>Now our consumers can consume in parallel:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Consumers subscribed to a topic are assigned partitions</p>
</li>
<li>
<p>Group covers all partitions</p>
</li>
<li>
<p>Each consumer has an offset for each partition</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig3-4.svg" alt="Cluster shown with 3 partitions of orders topic: partition 0 has messages at offsets 0 through 5, partition 1 has messages at offsets 0 through 2, and partition 2 has messages at offsets 0 through 3. Each partition has a dotted box showing the offset where the next message would be written. Order processing consumer group shown with 3 consumers with arrows to partitions and specifically to consumer offsets: consumer 0 has consumer offset 5 in partition 0, consumer 1 has consumer offset 1 in partition 1, and consumer 2 has consumer offset of 4 in partition 2." width="672" height="232">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Now that we have 3 partitions, we can really see consumption happening in parallel. We said before that consumers subscribe to topics. More specifically, Kafka will assign each consumer a partition&#8201;&#8212;&#8201;or partitions&#8201;&#8212;&#8201;of the subscribed topics. Kafka will also take care of making sure that every partition gets assigned to one of the consumers in the group. This is important&#8201;&#8212;&#8201;nobody&#8217;s order gets missed.</p>
</div>
<div class="paragraph">
<p>In essence, our consumers in the group are working together as a team to consume all the orders. And, in our picture with the order processing group there were three consumers. Conveniently, we have three partitions too, so each consumer is processing one partition. It&#8217;s sort of like a virtualization of if every partition were a line at the front of a restaurant and each consumer were one of the folks working a register taking orders.</p>
</div>
<div class="paragraph">
<p>Each consumer needs to know who&#8217;s next in line, and does that with a consumer offset. Notice in the picture that there&#8217;s an arrow from every consumer to a specific offset in an assigned partition. The arrow points to that consumer&#8217;s offset in that partition. So consumer 0 has presumably processed the orders at offsets <code>0</code> through <code>4</code> in partition 0 and is ready to take process the order at offset <code>5</code>. And consumer 1 has taken one customer&#8217;s order in partition 1. Partition 2 is effectively the line you want to get in when you go into the restaurant. The assigned consumer, consumer 2, has processed all the orders and has its consumer offset set at <code>5</code>, ready to process the next order that arrives.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_expanding_the_last_picture">Expanding the Last Picture</h3>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig3-5.svg" alt="Same graphic as before, but with inventory consumer group with consumer 3 and consumer 4 added again. Offsets arrows for the inventory consumer group members are added: consumer 3 has consumer offset 2 in partition 0 and consumer offset 1 in partition 1, while consumer 4 has consumer offset 1 in partition 2.">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>For completeness, let&#8217;s add some more into that picture. You&#8217;ll see the same picture as before, but this time the inventory consumer group is showing too.</p>
</div>
<div class="paragraph">
<p>A difference is that there are just 2 consumers in this group. But every order&#8201;&#8212;&#8201;in all three partitions&#8201;&#8212;&#8201;has to get counted in inventory. With two consumers and three partitions, that means that one of those consumers is going to have to be processing two partitions.</p>
</div>
<div class="paragraph">
<p>Notice also that there are offsets from <em>each</em> consumer to each assigned partition. Consumer 3 is processing two partitions, but it&#8217;s at offset <code>2</code> in partition 0 and offset <code>1</code> in partition 1.</p>
</div>
<div class="paragraph">
<p>Also, if we look at partition 2, we see the two different consumers are at different places. That&#8217;s pretty likely, and this is probably the natural situation you&#8217;d expect. Consumer 2, processing orders, is a couple orders ahead of consumer 4, who is tallying those orders for inventory. But nothing says it has to be this way. The consumers in the different groups are totally independent. So you see&#8201;&#8212;&#8201;intentionally&#8201;&#8212;&#8201;an example of this with partition 0, where the inventory-tracking consumer is an order ahead of the order-processing consumer.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_how_do_messages_get_partitioned">How Do Messages Get Partitioned?</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Producers</strong> decide which messages go to which partition</p>
</li>
<li>
<p>Partitions are indexed from <code>0</code> to <code>numberOfPartitions - 1</code></p>
</li>
<li>
<p>Default partitioner: <code>partitionIndex = hash(key) % numberOfPartitions</code></p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>You may be wondering just how the messages get to the partitions.</p>
</div>
<div class="paragraph">
<p>Remember, it is the producers who send the messages, and it is actually the producer&#8217;s job to decide the partition. There are different ways this can happen, but in almost all cases, the producer is running a process called a partitioner to make this decision. And, here, we&#8217;ll just talk about the default partitioner.</p>
</div>
<div class="paragraph">
<p>Remember, we count from <code>0</code> in indexing partitions, so if you had five partitions, they would be indexed <code>0</code> to <code>4</code>. The first thing the default partitioner does is run the key through a hash function. This more or less mixes up the inputs (and makes them numeric if needed), but, as it is a function, running the same key through the hash function will always give the same output. But, we also have to have a result smaller than the number of partitions, so dividing by that number and keeping the remainder achieves that. You&#8217;ll see this shown with the modulus operator above.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_scaling_is_easy">Scaling is Easy!</h3>
<div class="paragraph">
<p>Say you want to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increase the number of consumers in a group during a busy season</p>
</li>
<li>
<p>Decrease the number of consumers in a group when things are slow</p>
</li>
<li>
<p>Increase the number of partitions for a topic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you do, Kafka <em>automatically</em> redistributes the assignments of consumers to partitions!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
More on how all of this works in both our Developer and Administrator training!
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>One last thing to talk about here. Essentially, you can change some things about your deployment.</p>
</div>
<div class="paragraph">
<p>If you want more consumers, you can choose to increase how many consumers are running in a group. And you can decrease that number too. For our restaurant application, this might be like having more cashiers running registers at dinner time, but having fewer working when things are calmer.</p>
</div>
<div class="paragraph">
<p>What&#8217;s nice about this is that Kafka is watching for changes in how many consumers are in groups, and if it detects a change, it will automatically reassign consumers to partitions.</p>
</div>
<div class="paragraph">
<p>This is great for helping you get parallelism, but if you have four partitions, you can&#8217;t have more than four consumers processing them at once. However, you can also increase the number of parititons, and if you did, this also would cause Kafka to automatically move around the assignments of consumers to partitions. We call this rebalancing.</p>
</div>
<div class="paragraph">
<p>And, it&#8217;s pretty big deal and there&#8217;s a lot to understand to really get all the details, but that&#8217;s all you need to know for now! We go much, much deeper into this concept in both of our Developer and Administration courses - from different perspectives.</p>
</div>
<div class="paragraph">
<p>With that, we&#8217;re done with our logical view of how partitions and consumers work. In the next lesson, we get into some of the physical matters.</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_4_whats_going_on_inside_kafka">4: What&#8217;s Going On Inside Kafka?</h2>
<div class="sectionbody">
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>This is the fourth lesson in our Technical Fundamentals of Apache Kafka course. If you&#8217;ve checked out the other lessons, you now know some things about messages, topics, and producers, and hopefully have a good idea how consumers and partitions work logically.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_going_deeper">Going Deeper&#8230;&#8203;</h3>
<div class="paragraph">
<p>Now let&#8217;s learn about some more details about a Kafka cluster, especially <em>physical</em> things&#8230;&#8203;
.Commentary</p>
</div>
<details>
<summary class="title">Details</summary>
<div class="content">
<div class="paragraph">
<p>Let&#8217;s continue exploring, but now let&#8217;s go deeper into Kafka from more of a physical perspective in this lesson.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_brokers">Brokers</h3>
<div class="paragraph">
<p>A Kafka cluster consists of multiple <strong>brokers</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-1.svg" alt="Kafka cluster showing brokers with IDs 101, 102, 103, and 104" width="467" height="494">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>I want to start by telling you about one more important concept&#8201;&#8212;&#8201;that of a broker.</p>
</div>
<div class="paragraph">
<p>We need at least one broker to use Kafka, and in practice, we have mutiple brokers to form a Kafka cluster.</p>
</div>
<div class="paragraph">
<p>Our data will be written to the brokers and read from the brokers. And, you could think of them as physical machines&#8201;&#8212;&#8201;but they could also be virtual or in the cloud somewhere. As far as we&#8217;re concerned in this course, that&#8217;s all the same.</p>
</div>
<div class="paragraph">
<p>So, let&#8217;s start with a picture of a Kafka cluster with four brokers. Each broker has a broker ID, so that&#8217;s what the numbers 101 through 104 in the picture you see are.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_partitions_brokers">Partitions &amp; Brokers</h3>
<div class="paragraph">
<p>Partitions are really <strong>physical</strong> groupings of the messages in topics.</p>
</div>
<div class="paragraph">
<p>Partitions are stored on brokers.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-2.svg" alt="Same as previous image but with orders partitions added: partition 2 to broker 101, partition 0 added to broker 102, and partition 1 added to broker 104" width="467" height="494">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>But we said earlier every message has to be part of a topic, and specifically part of a partition. So, the messages don&#8217;t directly live on the brokers. The brokers contain partitions&#8201;&#8212;&#8201;more specifically, partitons of topics.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s keep our running example going. Our orders topic had three partitions. So here they are again, represented in green boxes on various brokers. Partition 0 is on Broker 102, Partition 1 is on Broker 104, and Partition 2 is on Broker 101.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_partitions_brokers_2">Partitions &amp; Brokers (2)</h3>
<table class="tableblock frame-none grid-none stripes-even stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of partitions is a topic setting.</p>
</div>
<div class="paragraph">
<p>Kafka decides how partitions get distributed across brokers.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-3.svg" alt="Previous image with customers:partition 1 added to broker 101 and customers:partition 0 added to broker 103" width="350" height="544">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>And, certainly, a broker can have more than one partition on it. So, here we take the previous picture and show two partitions of a different topic, the customers topic. It looks like Broker 101 has one partition of each different topic, and each of the others has one partition.</p>
</div>
<div class="paragraph">
<p>How many partitions are there? That&#8217;s something you decide at the topic level&#8201;&#8212;&#8201;probably when you create it, but remember you can increase it later. Either way, it is Kafka that will decide which partition goes to which broker. You can trust that it&#8217;s doing this in an intelligent way&#8201;&#8212;&#8201;but administrators among you will want to step in and monitor what&#8217;s going on and sometimes intervene.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_what_if_a_broker_goes_down">What if a Broker Goes Down?</h3>
<table class="tableblock frame-none grid-none stripes-even stretch">
<colgroup>
<col style="width: 60%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Want <em>high availability</em> of data in partitions</p>
</li>
<li>
<p>Achieved via <strong>replication</strong></p>
</li>
<li>
<p>Writes are reads go to <strong>leader</strong> replica</p>
</li>
<li>
<p><strong>Follower</strong> replicas keep backup copies of the leader</p>
</li>
<li>
<p>If leader dies, a follower becomes the leader</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-4.svg" alt="Kafka cluster with partitions of orders topic showing. Broker 102 contains leader and brokers 101 and 103 contain followers.">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Okay, great, data lives on partitions and partitions live on brokers.</p>
</div>
<div class="paragraph">
<p>No matter how they&#8217;re deployed, brokers ultimately live on hardware that may fail or become unreachable. But customers want real-time responses and you want your data to be available. If my lunch order lands on the partition on Broker 102 and something&#8217;s wrong with Broker 102, I still want my lunch and I still want it at lunch time.</p>
</div>
<div class="paragraph">
<p>So what can we do about this? Well, the answer is replication, and I want to tell you a little bit about that here.</p>
</div>
<div class="paragraph">
<p>We can turn on replication, and when we do, we sort of have backup copies of every partition&#8201;&#8212;&#8201;or better said, multiple instances of each partition. One instance, the main one, we call the leader, and all writes go to the leader. Furthermore, the consumers also read from the leader.</p>
</div>
<div class="paragraph">
<p>There are additionally replicas called followers, and they keep up with the leader in the background. In our picture, you now see just one partition, with its leader on Broker 102 - and two followers - one on 101 and one on 103. If something were to cause Broker 102 to be unavailable, our leader replica is unavailable, but Kafka can detect this and promote one of those followers - from 101 or 103 - to become the leader. And this is good, because it keeps our data highly available. I still get my lunch that landed on the parition on 102 in a reasonable amount of time (and if it&#8217;s all managed right, I probably have no idea anything ever went wrong.)</p>
</div>
<div class="paragraph">
<p>That&#8217;s the big picture story of replication and we&#8217;ll leave it at that for here. If you want to learn more of the details, we go into lots of depth in the Developer and Administration classes&#8201;&#8212;&#8201;of course, tailored to each of those roles.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_serialization_and_deserialization">Serialization and Deserialization</h3>
<div class="ulist">
<ul>
<li>
<p>Kafka stores messages as byte arrays</p>
</li>
<li>
<p>Producers must <strong>serialize</strong> messages</p>
</li>
<li>
<p>Consumers must <strong>deserialize</strong> messages</p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Okay, cool, so we know about brokers and replication now. There are a few other things you should know about before we wrap up here.</p>
</div>
<div class="paragraph">
<p>The first is about the format of data. There are lots of ways we can express data to send to Kafka, but in all cases, data is stored in Kafka as byte arrays. We need a process called a serializer to do the conversion. There are some lab exercises that are available to you with this course, and you&#8217;ll just be working with text. But behind the scenes, string serializers are being used.</p>
</div>
<div class="paragraph">
<p>You can specify serializers independently for keys and values&#8201;&#8212;&#8201;and this is something you would do in configuring a producer. On the flip side, serialization must be undone, so consumers will need something called deserializers for that.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_immutable_messages">Immutable Messages</h3>
<div class="ulist">
<ul>
<li>
<p>Messages are <strong>immutable</strong></p>
</li>
<li>
<p>Once written, we cannot change anything about them</p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Next&#8201;&#8212;&#8201;another important detail you should know in getting started with Kafka is that of immutability. Kafka messages are immutable. What does this mean? Literally taking the word apart, it means unchangeable. Or, once a message is written, you can&#8217;t change anything about it.</p>
</div>
<div class="paragraph">
<p>That&#8217;s really all there is to say for now, but keep this important fact about Kafka logs in your mind as you learn about Kafka.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_but_we_dont_keep_messages_forever">&#8230;&#8203;But We Don&#8217;t Keep Messages Forever&#8230;&#8203;</h3>
<div class="paragraph">
<p>Control which messages stay in Kafka via a <strong>retention policy</strong>:</p>
</div>
<table class="tableblock frame-none grid-all stripes-even stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 44.4444%;">
<col style="width: 44.4445%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Deletion</th>
<th class="tableblock halign-left valign-top">Compaction</th>
</tr>
</thead>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Idea</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Remove messages older than a certain age (default 7 days)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Keep only the latest value for each key</p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Before</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-5.svg" alt="Kafka log with offsets 0 through 4. Keys of messages are shown as a, b, b, a, and a. Ages of messages in days, respectively, are shown as 12, 10, 6, 5, and 2. Ages 12 and 10 are colored red, while the rest are colored green.">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-6.svg" alt="Kafka log with offsets 0 through 4. Keys of messages are shown as a, b, b, a, and a. Ages of messages in days, respectively, are shown as 12, 10, 6, 5, and 2. Keys of messages at offsets 0, 1, and 3 are colored red; the rest are colored green.">
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">After</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-7.svg" alt="Previous Kafka log after deletion, showing only the messages at offsets 2, 3, and 4 remaining.">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig4-8.svg" alt="Previous Kafka log after compaction, showing only the messages at offsets 2 and 4 remaining.">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Partitions are divided into segments, which affect both retention policies.
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>All right - one last important thing. Yes, you cannot change a message, but that doesn&#8217;t mean messages stay in Kafka forever. Back to that idea that we use Kafka to process data in motion. So, there must be some way of controlling how long messages stay in Kafka. And there is. We call that a retention policy.</p>
</div>
</div>
</details>
<details>
<summary class="title">Commentary: Deletion (left column)</summary>
<div class="content">
<div class="paragraph">
<p>The simplest retention policy is to delete messages based solely on their age. This the most common use of the deletion retention policy, and it&#8217;s set up by default to delete messages older than 7 days.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at a little example of that. On the left, in the center, you see a log with some information about 5 messages&#8201;&#8212;&#8201;their offsets, their keys, and their ages. It is only their ages that matter, and messages older than 7 days get deleted in the default setup. Those messages at offsets 0 and 1 qualify, so their ages are colored red. And you can see that after deletion is done, they&#8217;re gone. Notice also that the messages that stay&#8201;&#8212;&#8201;those whose ages are colored green&#8201;&#8212;&#8201;retain their offsets.</p>
</div>
<div class="paragraph">
<p>In our restaurant order processing example, getting the orders processed is the most important thing, but keeping them around longer enables things like inventory or analysis. If 7 days doesn&#8217;t suit you, you can tune that threshold.</p>
</div>
</div>
</details>
<details>
<summary class="title">Commentary: Compaction (right column)</summary>
<div class="content">
<div class="paragraph">
<p>On the right, there&#8217;s a little taste of the other major retention policy: compaction. This one only cares about keys. It applies in use cases where keeping older values of a key doesn&#8217;t make sense. This works nicely for things like tracking the state of an online shopping order.</p>
</div>
<div class="paragraph">
<p>You&#8217;ll see the same log as in the deletion example, except this time we care about keys and only keep the latest message per key. There&#8217;s an appearance of key <em>a</em> at offset 0, but the later appearance of key <em>a</em> at offset 3 renders the message at offset 0 old information. So, it&#8217;s red and will go away. But, there&#8217;s an even newer appearance of key <em>a</em> at offset 4, making even the offset 3 message old and it will also go away.</p>
</div>
<div class="paragraph">
<p>Looking at key <em>b</em>, we see its latest appearance at offset 2, and this makes the one at offset 1 be deemed old and it will be compacted away. We&#8217;re left with only the messages at offsets 2 and 4&#8201;&#8212;&#8201;only one appearance per key.</p>
</div>
<div class="paragraph">
<p>There&#8217;s a lot more to say about these policies, but this is the basic idea and if you understand this, you&#8217;re well on your way to learning Kafka. One of those details is that partitions are further divided into something called segments, and they have an impact on the implementation. But this is enough for now!</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_check_your_knowledge_2">Check Your Knowledge!</h3>
<div class="paragraph">
<p>Try a <a href="https://forms.gle/FhJXvtSLCLHmT7Np9" target="_blank" rel="noopener">quick quiz on Lessons 3 and 4</a>.</p>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>With that, it&#8217;s time again to take a break and I invite you to review what you&#8217;ve learned in this lesson and the previous with a quick quiz. This one&#8217;s a little more involved than the last.</p>
</div>
<div class="paragraph">
<p>[Cmd+3] Here&#8217;s what it looks like.</p>
</div>
<div class="paragraph">
<p>As before &#8230;&#8203; If you&#8217;re viewing this On Demand via our website, you&#8217;ll find the link to the quiz next in your learning path. If you&#8217;re viewing this via YouTube, you&#8217;ll find the link to the quiz down below in the description.</p>
</div>
<div class="paragraph">
<p>And either way, the quiz is powered by Google Forms, it&#8217;s quick, and it&#8217;s anonymous. You&#8217;ll instantly get feedback when you click the submit button.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve done that, come back for the final lesson. I&#8217;ll recap what we&#8217;ve talked about and we&#8217;ll look at the life cycle of a message again, now that we know more details. And I&#8217;ll give you a taste of some other things you can do with Kafka and related Confluent products, and leave you with some additional exercises to go deeper with what you&#8217;ve learned and experience some it firsthand.</p>
</div>
<div class="paragraph">
<p>Cmd+1</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_5_recapping">5: Recapping</h2>
<div class="sectionbody">
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>In this short section, we&#8217;re going to recap what we&#8217;ve learned about.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_producing_2">Life Cycle of a Message: Producing</h3>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig5-1.svg" alt="Like in Lesson 2, Kafka cluster in the center as a box, but like in Lesson 4, cluster shows brokers inside with IDs 101, 102, 103, and 104. As in Lesson 4, orders topic partitions are shown: partition 2 on broker 101, partition 0 on broker 102, and partition 1 on broker 104. Box for producer to the left with a box representing a message inside the producer, with a dotted arrow from the message pointing to Kafka. Order processing consumer group shown in a box to the right; it contains boxes for consumer 0, consumer 1, and consumer 2.">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Producers serialize and partition messages</p>
</li>
<li>
<p>Producers send messages</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;in batches - can be configured for throughput and latency desires</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Let&#8217;s begin by recapping the life cycle of a message. Over the next three slides, you&#8217;ll see pictures similar to what you saw in the first lesson. But now, we&#8217;ll see those illustrations enhanced with many details you&#8217;ve learned about since then.</p>
</div>
<div class="paragraph">
<p>The picture you see now shows the ideas of a producer, Kafka, and consumers like we started with. But now the picture also shows brokers and partitions&#8201;&#8212;&#8201;and we have a consumer group instead of a singe consumer.</p>
</div>
<div class="paragraph">
<p>Here, we&#8217;re focusing on the producer side. SRemember that producers first prepare messages, and when they do, they associate a topic with each message. We are again using the idea that a message&#8201;&#8212;&#8201;that little orange box in the picture&#8201;&#8212;&#8201;will correspond to a food order, and it will be part of the <code>orders</code> topic.</p>
</div>
<div class="paragraph">
<p>The producer runs the message through a serliazer to convert it to bytes and then runs it through a partitioner to decide what specific partition of the orders topic will get this message. And then&#8201;&#8212;&#8201;omitting some details&#8201;&#8212;&#8201;it can send it off. One of those details is that the producer can be tuned to send more than one message at once, allowing you to  optimize for the kind of throughput and latency you want.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_kafka_2">Life Cycle of a Message: Kafka</h3>
<div class="paragraph">
<p>Produced messages live in Kafka, organized by topic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig5-2.svg" alt="Previous graphic, but now the message is in the orders topic, partition 1, in Kafka and no longer showing in the producer.">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Kafka consists of brokers</p>
</li>
<li>
<p>Brokers contain partitions, which contain messages</p>
</li>
<li>
<p>Brokers handle retention and replication</p>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Now let&#8217;s switch over to Kafka. Remember that our Kafka cluster consists of brokers. Those brokers contain partitions of all the known topics. So here again, we see three partitions of the <code>orders</code> topic spread out on different brokers of our Kafka cluster.</p>
</div>
<div class="paragraph">
<p>It looks like the partitioner had decided our message went to partition 1 of the orders topic, so you can see it now on that partition, living on broker 104.</p>
</div>
<div class="paragraph">
<p>Remember, also, that we can control how messages are retained in Kafka and we can configure our topics to be replicated to allow for high availabiity. Both of these are matters the brokers take care of managing.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_life_cycle_of_a_message_consumption_2">Life Cycle of a Message: Consumption</h3>
<div class="paragraph">
<p>Consumers subscribe to topics in Kafka and poll for new messages.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig5-3.svg" alt="Previous graphic with arrows from consumer 0 to partition 2, from consumer 1 to partition 0, and consumer 2 to partition 1. The message now shown inside consumer 2 as well, with a dotted arrow between the message in Kafka pointing to the message in consumer 2.">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Consumers operate in groups</p>
</li>
<li>
<p>Consumers subscribe to topics, are assigned partitions of those topics</p>
</li>
<li>
<p>Consumers poll for messages in partitions at consumer offsets</p>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203;and fetch in batches - can be configured for throughput and latency desires</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Now let&#8217;s look at the consumption end of the picture.</p>
</div>
<div class="paragraph">
<p>So, remember that consumers have the job of reading messages. And they generally operate in groups to distribute the workload of reading. A consumer must subscribe to topics it is interested in&#8201;&#8212;&#8201;that&#8217;s the "sub" of "pub-sub." And, all the consumers in a group get assigned partitions of the subscribed topics.</p>
</div>
<div class="paragraph">
<p>In our picture, we have a group of consumers processing orders, and we see the partition assignments via the arrows. We&#8217;ll focus on consumer 2, subscribed to <code>orders</code> and assigned to partition 1. Like all consumers, it must poll for new messages, and when it does, since partition 1 has our orange message, it&#8217;ll be able to fetch it&#8201;&#8212;&#8201;and then go on to whatever it does to process it.</p>
</div>
<div class="paragraph">
<p>That&#8217;s all there is to it for now, but note that, like on the producer end, we can tune our consumers to ask for more than one message at a time and tune them too.</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_6_going_further_optional">6: Going Further (Optional)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_note_optional_section">Note: Optional Section</h3>
<div class="paragraph">
<p>If you are completing this training as a prerequisite to one of our instructor-led training courses, you may treat this section as optional.</p>
</div>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_a_step_beyond_fundamentals_other_components">A Step Beyond Fundamentals: Other Components</h3>
<div class="paragraph">
<p>We&#8217;ve addressed some aspects of Core Kafka in this course. Some other topics you may want to learn about include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Kafka Connect</strong> - a tool that helps you copy data to Kafka from other systems and vice-versa</p>
</li>
<li>
<p><strong>Kafka Streams</strong> - a layer on top of the Producer and Consumer APIs that allows for stream processing</p>
</li>
<li>
<p><strong>Confluent ksqlDB</strong> - a tool for stream processing using a more-accessible SQL-like syntax, among other things</p>
</li>
<li>
<p><strong>Confluent Schema Registry</strong> - a tool for managing schemas, guiding schema evolution, and enforcing data integrity</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can learn more about these topics in our Confluent Developer Skills for Building Apache Kafka&#174; and Apache Kafka&#174; Administration by Confluent courses.</p>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Before we wrap up, let&#8217;s get a taste of some of the other things you can do. Everything we&#8217;ve talked about in this course is part of core Kafka, but this list also includes some Confluent-specific additions.</p>
</div>
<div class="paragraph">
<p>You know that you can produce data to Kafka and consume data from Kafka, but what if you want to get that data from some other system or send it to some other system? You can do that. We could say Kafka plays well with others, and Kafka Connect is the tool that enables that. We talk about how it works and how to configure it in both our Developer course and our Administration course.</p>
</div>
<div class="paragraph">
<p>Additionally, while producers and consumers are great, you may be interested in stream processing to transform or enrich your data&#8201;&#8212;&#8201;or do some interesting time-based processing with your data. There are some tools that integrate with Kafka to let you do that.</p>
</div>
<div class="paragraph">
<p>Kafka Streams, part of core Kafka, is one of them, and ksqlDB, a Confluent product, is another. Among other things, ksqlDB lets you do stream processing with a more accessible, SQL style of language.</p>
</div>
<div class="paragraph">
<p>Finally, your data is likely to need more than just standard data types, and you may be interested in managing schemas. We have the Confluent Schema Registry to help with that, and we get into lots of details of how it works&#8201;&#8212;&#8201;and how to work with schemas in general&#8201;&#8212;&#8201;in our Developer training.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_what_does_confluent_platform_add_to_kafka">What Does Confluent Platform Add to Kafka?</h3>
<div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig5-4.svg" alt="fig5 4">
</div>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>As noted on the last slide, everything we discussed in the previous lessons is part of core Apache Kafka, and Confluent Platform adds some additional functionality to the mix.</p>
</div>
<div class="paragraph">
<p>Here we have a picture that visualizes some of that. The black box at the bottom represents Apache Kafka&#8201;&#8212;&#8201;and, as per the last slide, that includes the Connect API and Kafka Streams.</p>
</div>
<div class="paragraph">
<p>The lighter blue, perhaps turquoise, is the free level of what you get with Confluent Platform. This is where ksqlDB and the Schema Registry come in, and it has some other things&#8201;&#8212;&#8201;like the REST proxy, which allows you to produce to and consume from Kafka from pretty much any language, as long as you can make an HTTP call.</p>
</div>
<div class="paragraph">
<p>Finally, the darker blue boxes represent the paid Confluent Platform features. This includes some tools like Confluent Control Center, which is a web-based GUI that allows you to do many management and monitoring tasks. Also, it includes many tools for managing a cluster&#8201;&#8212;&#8201;such as Auto Data Balancer, which you can use to keep some brokers from carrying significantly-heavier loads than others.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_confluent_cloud">Confluent Cloud</h3>
<table class="tableblock frame-none grid-none stripes-even stretch">
<colgroup>
<col style="width: 60%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="ulist">
<ul>
<li>
<p>Can deploy CP as self-managed software but&#8230;&#8203;</p>
</li>
<li>
<p>Confluent Cloud = <strong>fully-managed</strong> deployment of CP</p>
<div class="ulist">
<ul>
<li>
<p>Many administrative tasks done for you</p>
</li>
</ul>
</div>
</li>
<li>
<p>Confluent Cloud available on</p>
<div class="ulist">
<ul>
<li>
<p>AWS</p>
</li>
<li>
<p>Google Cloud Platform</p>
</li>
<li>
<p>Microsoft Azure</p>
</li>
</ul>
</div>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/fun-revamp-images-ex-copy/fig5-5.svg" alt="fig5 5" width="100%">
</div>
</div></div></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>Last thing to tell you about&#8201;&#8212;&#8201;we offer Confluent Cloud.</p>
</div>
<div class="paragraph">
<p>While you can deploy Apache Kafka or Confluent Platform and manage it on your own, the idea is that Confluent Cloud exists to take a lot of that management burden off of you. A lot of administrative tasks&#8201;&#8212;&#8201;sizing, upgrades, and more&#8201;&#8212;&#8201;are handled by Cloud.</p>
</div>
<div class="paragraph">
<p>It is available backed by any of the three major public cloud providers&#8201;&#8212;&#8201;and you can try it for free on our website. And, in fact, there&#8217;s an exercise tailored to this course that allows you to do just that.</p>
</div>
</div>
</details>
<hr>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_your_next_steps">Your Next Steps</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Complete interactive lab on seeing console producers and consumers in action.<br>
&#8594; <a href="https://confluent-training.github.io/kafka-fundamentals/fun-exercise-book.html#_getting_started_in_confluent_cloud" target="_blank" rel="noopener">Short Confluent Cloud version</a> <br>
&#8594; Gitpod version: <a href="https://confluent-training.github.io/kafka-fundamentals/fun-exercise-book.html#_deeper_fundamentals_activity" target="_blank" rel="noopener">More involved version using Gitpod</a></p>
</li>
<li>
<p>Work though other Critical Thinking Challenge Exercises.<br>
&#8594; <a href="https://confluent-training.github.io/kafka-fundamentals/fun-ctce.html" target="_blank" rel="noopener">On the web</a><br>
&#8594; Solutions on the web too!<br></p>
</li>
<li>
<p>Enroll in and complete one of these courses, as suits your role:</p>
<div class="ulist">
<ul>
<li>
<p>Apache Kafka&#174; Administration by Confluent</p>
</li>
<li>
<p>Confluent Developer Skills for Building Apache Kafka&#174;</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<details>
<summary class="title">Commentary</summary>
<div class="content">
<div class="paragraph">
<p>So, what should you do next? I&#8217;ll leave you with some ideas!</p>
</div>
<div class="paragraph">
<p>As I just noted on the last slide, there is a short lab exercise that lets you explore Confluent Cloud and see producing and consuming in action. There&#8217;s a separate exercise that doesn&#8217;t use Cloud&#8201;&#8212;&#8201;but we&#8217;ve configured a tool called Gitpod to spin up some containers to play with producing and consuming too. This one goes deeper into some details with consumer groups and offsets. It&#8217;s also free, but you do have to have a GitHub account to do it&#8201;&#8212;&#8201;but you can sign up for one of those for free too if you don&#8217;t have it already.</p>
</div>
<div class="paragraph">
<p>Additionally, while the two quick quizzes are a fun interactive way of engaging with this material, there&#8217;s only so far you can go with multiple choice.</p>
</div>
<div class="paragraph">
<p>Finally, there are some Critical Thinking Challenge Exercises to think about the content more deeply. These were really meant to inspire discussions, so if you want to get the most out of them, you are encouraged to grab a colleague or friend or two and talk them through. Whether you do that or think them through on your own, there are solutions available too that say some things I would make sure would come up if we were discussing these in a live class.</p>
</div>
<div class="paragraph">
<p>Finally, of course, if you want to learn more, please join us for one of our instructor-led training courses. You&#8217;re now ready to jump into the Administration course or the Developer course&#8201;&#8212;&#8201;and you&#8217;ll be even more ready to make the most of either if you&#8217;ve checked out some of the exercises first.</p>
</div>
</div>
</details>
<hr>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 7.0.0-v1.0.2<br>
Last updated 2023-01-03 19:45:29 UTC
</div>
</div>
</body>
</html>